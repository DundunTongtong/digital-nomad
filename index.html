<script>
const jobList = document.getElementById('jobList')
const regionFilter = document.getElementById('regionFilter')
const roleFilter = document.getElementById('roleFilter')

let jobs = []

async function loadJobs() {
  const res = await fetch('/api/jobs')
  jobs = await res.json()
  renderJobs()
}

function renderJobs() {
  jobList.innerHTML = ''
  jobs
    .filter(j =>
      (regionFilter.value === 'all' || j.region === regionFilter.value) &&
      (roleFilter.value === 'all' || j.role === roleFilter.value)
    )
    .forEach(j => {
      const div = document.createElement('div')
      div.className = 'bg-white rounded-xl shadow p-5'
      div.innerHTML = `
        <h4 class="font-semibold">
          ${j.title} ${j.paid ? '⭐' : ''}
        </h4>
        <p class="text-sm text-gray-500">${j.company}</p>
        <a href="${j.url}" target="_blank" class="text-sm text-blue-600 mt-2 inline-block">
          查看详情 →
        </a>
      `
      jobList.appendChild(div)
    })
}

regionFilter.onchange = roleFilter.onchange = renderJobs
loadJobs()
</script>
